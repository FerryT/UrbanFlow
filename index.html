<html>
<head>
	<title>Urban flow</title>
	<meta charset="utf-8">
	<script src="resources/d3.min.js" charset="utf-8"></script>
	<script src="resources/jquery-1.12.2.min.js"></script>
	<script src="resources/ui/jquery-ui.min.js"></script>
	<link rel="stylesheet" href="resources/ui/jquery-ui.min.css">
	<link rel="stylesheet" href="resources/ui/jquery-ui.structure.min.css">
	<link rel="stylesheet" href="resources/ui/jquery-ui.theme.min.css">
	<script src="resources/wewo.js"></script>

	<script src="resources/rasterizer.js"></script>
	<script src="resources/heuristics.js"></script>
	<script src="resources/aco.js"></script>

	<script src="resources/interface.js"></script>
	<link rel="stylesheet" href="resources/interface.css">
	<script src="resources/visuals.js"></script>
	<link rel="stylesheet" href="resources/visuals.css">
</head>
<body>
	<header>
		<h1></h1>
		<div id="btns-state">
			<input type="radio" id="rad-start" name="state" value="start"><label for="rad-start">&#9655;</label>
			<input type="radio" id="rad-stop" name="state" value="stop" checked="checked"><label for="rad-stop">&#9707;</label>
		</div>
	</header>
	<section id="properties">
		<div id="proptabs">
			<h3>General</h3>
			<div>
				<h4>Simulation:</h4>
			</div>
			<h3>Algorithm</h3>
			<div>
				<h4>Algorithm settings:</h4>
				<div id="algstate">
					<p>
						<label for="slr-ant-count">Number of ants:</label> <span id="ant-count-value"></span>
						<div id="slr-ant-count"></div>
					</p>
					<p>
						<label for="slr-heuristic-power">Power of heuristics (&alpha;):</label> <span id="heuristic-power-value"></span>
						<div id="slr-heuristic-power"></div>
					</p>
					<p>
						<label for="slr-trail-power">Power of trails (&beta;):</label> <span id="trail-power-value"></span>
						<div id="slr-trail-power"></div>
					</p>
					<p>
						<label for="slr-trail-decay">Decay (&rho;):</label> <span id="trail-decay-value"></span>
						<div id="slr-trail-decay"></div>
					</p>
					<p>
						<label for="slr-trail-reward">Reward (L):</label> <span id="trail-reward-value"></span>
						<div id="slr-trail-reward"></div>
					</p>
					<p>
						<label for="slr-trail-feedback">Feedback (&lambda;):</label> <span id="trail-feedback-value"></span>
						<div id="slr-trail-feedback"></div>
					</p>
				</div>
			</div>
		</div>
	</section>
	<section id="content">
		<div id="document">
			<svg id="field" width="600" height="600"></svg>
		</div>
	</section>
	<section id="toolbar">
		<div id="btns-tools" class="ui-widget-header ui-corner-all">
			<input type="radio" id="rad-road" name="tool" value="road"><label for="rad-road">Roads</label>
			<input type="radio" id="rad-pavement" name="tool" value="pavement"><label for="rad-pavement">Pavements</label>
			<input type="radio" id="rad-building" name="tool" value="building"><label for="rad-building">Buildings</label>
		</div>
	</section>
	<footer>
		<small>By Ferry Timmers and Maurice Houben, March 2016</small>
	</footer>
	<script>
		var domain = [0, 0, 600, 600],
			resolution = [100, 100],
			grid = Rasterize(function (){}, domain, resolution),
			settings = {
				trail_default:   Number.MIN_VALUE,
				trail_minimum:   1e-1,
				trail_power:     0.5,
				trail_decay:     0.5,
				trail_reward:    0.5,
				heuristic_power: 0.5,
				iteration_limit: 100000,
				ant_count:       25,
			},
			aco = new ACO(grid, settings, Heuristic.cosine_distance),
			field = new Field('field', aco, domain, resolution);
		aco
			.addSource(grid.lookup(0, 0), 100)
			.addTarget(grid.lookup(Infinity, Infinity), 100)
		;
		window.requestAnimationFrame(function render()
		{
			field.draw();
			window.requestAnimationFrame(render);
		});

	</script>
</body>
</html>